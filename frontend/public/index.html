<!doctype html>
<html lang="fr">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
        <title>Terraform - Marine Langrez</title>
        <link rel="stylesheet" href="/src/styles.css" />
    </head>
    <body>
        <main class="container">
            <header class="header">
                <h1>Terraform - Marine Langrez</h1>
                <p class="subtitle">Infrastructure AWS 3-Tier (Frontend + API + Database)</p>
            </header>

            <div class="grid">
                <!-- Frontend Card -->
                <div class="card">
                    <div class="card-header">
                        <span class="icon">üåê</span>
                        <h2>Frontend (Nginx)</h2>
                    </div>
                    <div class="card-body">
                        <div class="info-row">
                            <span class="label">Statut:</span>
                            <span class="badge badge-success" id="frontend-status">‚úì Online</span>
                        </div>
                        <div class="info-row">
                            <span class="label">URL publique:</span>
                            <span class="value" id="frontend-url">...</span>
                        </div>
                        <div class="info-row">
                            <span class="label">R√¥le:</span>
                            <span class="value">Reverse Proxy + Static Files</span>
                        </div>
                    </div>
                </div>

                <!-- API Card -->
                <div class="card">
                    <div class="card-header">
                        <span class="icon">‚ö°</span>
                        <h2>API (Node.js)</h2>
                    </div>
                    <div class="card-body">
                        <div class="info-row">
                            <span class="label">Statut:</span>
                            <span class="badge badge-loading" id="api-status">‚è≥ Checking...</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Endpoint:</span>
                            <span class="value" id="api-endpoint">/api/</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Health:</span>
                            <span class="value" id="api-health">...</span>
                        </div>
                    </div>
                </div>

                <!-- Database Card -->
                <div class="card">
                    <div class="card-header">
                        <span class="icon">üóÑÔ∏è</span>
                        <h2>Database (PostgreSQL)</h2>
                    </div>
                    <div class="card-body">
                        <div class="info-row">
                            <span class="label">Statut:</span>
                            <span class="badge badge-loading" id="db-status">‚è≥ Checking...</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Type:</span>
                            <span class="value">PostgreSQL 16</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Connection:</span>
                            <span class="value" id="db-connection">Via API (priv√©)</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Data Display Card -->
            <div class="card card-full">
                <div class="card-header">
                    <span class="icon">üìä</span>
                    <h2>Donn√©es de la base</h2>
                </div>
                <div class="card-body">
                    <div id="data-display" class="data-display">
                        <div class="loading">Chargement des donn√©es...</div>
                    </div>
                </div>
            </div>

            <!-- Architecture Info -->
            <div class="card card-full architecture">
                <div class="card-header">
                    <span class="icon">üèóÔ∏è</span>
                    <h2>Architecture</h2>
                </div>
                <div class="card-body">
                    <div class="architecture-flow">
                        <div class="arch-item">
                            <div class="arch-box">üåê Frontend</div>
                            <div class="arch-label">Nginx + Static Files</div>
                            <div class="arch-sublabel">Port 80 (Public)</div>
                        </div>
                        <div class="arch-arrow">‚Üí</div>
                        <div class="arch-item">
                            <div class="arch-box">‚ö° API</div>
                            <div class="arch-label">Node.js + Express</div>
                            <div class="arch-sublabel">Port 3000 (VPC Priv√©)</div>
                        </div>
                        <div class="arch-arrow">‚Üí</div>
                        <div class="arch-item">
                            <div class="arch-box">üóÑÔ∏è Database</div>
                            <div class="arch-label">PostgreSQL 16</div>
                            <div class="arch-sublabel">Port 5432 (VPC Priv√©)</div>
                        </div>
                    </div>
                    <div class="info-box">
                        <p>
                            <strong>üîí S√©curit√© :</strong> Seul le Frontend est accessible depuis
                            Internet. L'API et la Database communiquent uniquement via le VPC priv√©
                            AWS (172.31.0.0/16).
                        </p>
                        <p>
                            <strong>üöÄ D√©ploiement :</strong> Infrastructure d√©ploy√©e
                            automatiquement avec Terraform. Images Docker build√©es via GitHub
                            Actions et stock√©es sur GHCR.
                        </p>
                    </div>
                </div>
            </div>

            <footer class="footer">
                <p>
                    üõ†Ô∏è Cr√©√© avec <strong>Terraform</strong>, <strong>Docker</strong>,
                    <strong>AWS EC2</strong> | üë§ Marine Langrez |
                    <a href="https://github.com/woorzz/terraform-project" target="_blank"
                        >üì¶ GitHub</a
                    >
                </p>
            </footer>
        </main>
        <script type="module" src="/src/main.js"></script>
    </body>
</html>
